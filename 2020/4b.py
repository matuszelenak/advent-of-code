import re; print(len(list(filter(lambda line: sum(map(lambda f: int({'byr': lambda x: x.isnumeric() and 1919 < int(x) < 2003, 'iyr': lambda x: x.isnumeric() and 2009 < int(x) < 2021, 'eyr': lambda x: x.isnumeric() and 2019 < int(x) < 2031, 'hgt': lambda x: (lambda y: (149 < int(y[0]) < 194 and y[1] == 'cm') or (58 < int(y[0]) < 77 and y[1] == 'in'))(getattr(re.match('^([0-9]+)+(cm|in)$', x), 'groups', lambda: (-1, ))()), 'hcl': lambda x: re.match(r'^#[0-9a-f]{6}$', x) is not None, 'ecl': lambda x: re.match('^amb|blu|brn|gry|grn|hzl|oth$', x) is not None, 'pid': lambda x: re.match('^[0-9]{9}$', x) is not None}.get(f.groups()[0], lambda y: False)(f.groups()[1])), re.finditer(r'([\w]+):([#\w]+)', line.replace('\n', ' ')))) == 7, open('4.in').read().split('\n\n')))))